window.$Tester={token:function(n){if(typeof n=="undefined")return sessionStorage.getItem("jwt-token");var t=$(n).json("token");return t&&sessionStorage.setItem("jwt-token",t),showMsg("你已经成功设置了Token!",0,function(){location.href=location.href}),!1},submit:function(n){var i=$(n).parents(".modal"),f,e,t;n=i.find("form");var r=n.find(".test-result").html(""),o=n.attr("method"),u=n.attr("action")||location.href,s={},h=$Tester.token();h&&(s={Authorization:"Bearer "+h});f=new FormData(n[0]);e={};o==="GET"?(f.forEach((n,i)=>{t&&(t+="&"),t+=i+"="+n}),u+=u.indexOf("?")===-1?"?"+t:"&"+t):f.forEach((n,t)=>e[t]=n);$.ajax({type:o,url:u,dataType:"json",contentType:"application/json;charset=utf-8",data:JSON.stringify(e),headers:s,success:function(n){r.parent().show();$(`<pre><code class="language-json">${JSON.format(n)}</code></pre>`).highlight().appendTo(r);n.code||u.indexOf("open/token")===-1?i.find(".token-action").addClass("hide"):i.find(".token-action").json("token",n.data).removeClass("hide")},error:function(n){r.parent().show();$(`<pre><code class="language-json">${JSON.format(n.responseText)}</code></pre>`).highlight().appendTo(r);i.find(".token-action").addClass("hide")}})},reset:function(n){n=$(n).parents(".modal").find("form");n.reset()}};JSON.format=function(n){var t,e;typeof n=="object"&&(n=JSON.stringify(n));var s="    ",u="\r\n",f=0,o=function(){var n="";for(let t=0;t<f;t++)n+=s;return n},h=function(t,i){var u=t,r;for(let f=i+1;f<n.length;f++)if(r=n.charAt(f),r==="\\")f++,u+=r,u+=n.charAt(f);else if(r===t){u+=r;break}else u+=r;return u},i="",r=!0;for(let s=0;s<n.length;s++)t=n.charAt(s),t==="{"?(r=!0,i+=t,i+=u,f++):t==="}"?(f--,i+=u,i+=o(),i+=t):t==="'"||t==='"'||t==="`"?(e=h(t,s),s+=e.length-1,r&&(i+=o(),r=!1),i+=e):t===","?(r=!0,i+=t,i+=u):t===":"?(i+=t,i+=" "):i+=t;return i};$(function(){var n=$Tester.token();n?($(".service-route i.bi-lock").addClass("hide"),$(".service-route i.bi-unlock").removeClass("hide")):($(".service-route i.bi-lock").removeClass("hide"),$(".service-route i.bi-unlock").addClass("hide"))});